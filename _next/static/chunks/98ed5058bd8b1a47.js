(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"warnOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},33956,e=>{"use strict";var t=e.i(43476);function s({message:e,retry:s}){return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 text-red-500 bg-red-50 rounded-lg max-w-md mx-auto my-4",children:[(0,t.jsx)("p",{className:"font-medium mb-2",children:e}),s&&(0,t.jsx)("button",{onClick:s,className:"text-sm bg-red-100 hover:bg-red-200 text-red-700 font-semibold py-2 px-4 rounded transition-colors",children:"Try Again"})]})}e.s(["default",()=>s])},52683,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566);let a=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);function l(){let e=(0,r.useRouter)(),l=(0,r.useSearchParams)().get("q")||"",[i,n]=(0,s.useState)(l),[o,c]=(0,s.useState)(l);return(0,s.useEffect)(()=>{n(l)},[l]),(0,s.useEffect)(()=>{let e=setTimeout(()=>{c(i)},500);return()=>clearTimeout(e)},[i]),(0,s.useEffect)(()=>{o!==l&&(o.trim()?e.push(`/?q=${encodeURIComponent(o.trim())}`):e.push("/"))},[o,e,l]),(0,t.jsxs)("form",{className:"flex w-full max-w-[600px] border border-gray-200 rounded-full overflow-hidden shadow-sm transition-shadow focus-within:shadow-md focus-within:border-blue-500",onSubmit:t=>{t.preventDefault(),i.trim()?e.push(`/?q=${encodeURIComponent(i.trim())}`):e.push("/")},children:[(0,t.jsx)("input",{type:"text",className:"flex-1 px-5 py-3 border-none text-base outline-none",placeholder:"Search for GIFs...",value:i,onChange:e=>n(e.target.value)}),(0,t.jsx)("button",{type:"submit",className:"flex items-center justify-center border-none bg-blue-500 text-white px-5 cursor-pointer hover:bg-blue-600 transition-colors","aria-label":"Search",children:(0,t.jsx)(a,{size:20})})]})}var i=e.i(46934),n=e.i(22016),o=e.i(57688);function c({gif:e}){return(0,t.jsxs)(n.default,{href:`/gif?id=${e.id}`,className:"group relative block rounded-lg overflow-hidden bg-gray-100 transition-transform hover:-translate-y-1 hover:shadow-lg",children:[(0,t.jsx)("div",{className:"relative w-full h-auto flex",children:(0,t.jsx)(o.default,{src:e.images.fixed_height.url,alt:e.title||"GIF",width:parseInt(e.images.fixed_height.width),height:parseInt(e.images.fixed_height.height),className:"w-full h-auto object-cover",unoptimized:!0})}),e.title&&(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-5 pt-2 opacity-0 transition-opacity group-hover:opacity-100",children:(0,t.jsx)("p",{className:"text-white text-sm m-0 whitespace-nowrap overflow-hidden text-ellipsis",children:e.title})})]})}function u({gifs:e}){return 0===e.length?(0,t.jsx)("div",{className:"text-center p-10 text-gray-500 text-lg",children:(0,t.jsx)("p",{children:"No GIFs found. Try searching for something!"})}):(0,t.jsx)("div",{className:"columns-2 md:columns-3 lg:columns-4 gap-4 w-full py-5 space-y-4",children:e.map(e=>(0,t.jsx)("div",{className:"break-inside-avoid mb-4",children:(0,t.jsx)(c,{gif:e})},e.id))})}var d=e.i(2545),h=e.i(33956);function f({initialQuery:e}){let[r,a]=(0,s.useState)([]),[l,n]=(0,s.useState)(!1),[o,c]=(0,s.useState)(null),[f,x]=(0,s.useState)(!0),[m,g]=(0,s.useState)(0),[p,b]=(0,s.useState)(!1),j=(0,s.useRef)(null);(0,s.useEffect)(()=>{(async()=>{n(!0),c(null),g(0);try{let t=[];t=e?await (0,i.searchGifs)(e,20,0):await (0,i.getTrendingGifs)(20,0),a(t),g(t.length),x(t.length>0),b(!0)}catch(e){console.error(e),c("Failed to load GIFs.")}finally{n(!1)}})()},[e]);let y=(0,s.useCallback)(async()=>{if(!l&&f&&p){n(!0),c(null);try{let t=[];t=e?await (0,i.searchGifs)(e,20,m):await (0,i.getTrendingGifs)(20,m),0===t.length?x(!1):(a(e=>[...e,...t]),g(e=>e+t.length))}catch(e){c("Failed to load more GIFs. Please check your connection.")}finally{n(!1)}}},[e,m,l,f,p]);return(0,s.useEffect)(()=>{let e=new IntersectionObserver(e=>{e[0].isIntersecting&&f&&!l&&p&&y()},{threshold:.1,rootMargin:"200px"});return j.current&&e.observe(j.current),()=>e.disconnect()},[y,f,l,p]),(0,t.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,t.jsx)(u,{gifs:r}),l&&(0,t.jsx)(d.default,{}),o&&(0,t.jsx)(h.default,{message:o,retry:y}),!l&&f&&(0,t.jsx)("div",{ref:j,className:"h-10 w-full"}),!f&&r.length>0&&!l&&(0,t.jsx)("p",{className:"text-center text-gray-500 py-8",children:"You've reached the end!"})]})}function x(){let e=(0,r.useSearchParams)().get("q")||"";return(0,t.jsxs)("div",{className:"min-h-screen px-5 max-w-[1200px] mx-auto font-sans",children:[(0,t.jsx)("header",{className:"py-5 border-b border-gray-200 mb-10",children:(0,t.jsx)("h1",{className:"text-2xl font-bold m-0 bg-gradient-to-r from-blue-500 to-cyan-400 bg-clip-text text-transparent",children:"GIF Explorer"})}),(0,t.jsxs)("main",{className:"flex flex-col gap-8",children:[(0,t.jsx)("div",{className:"flex justify-center w-full",children:(0,t.jsx)(l,{})}),(0,t.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:e?`Results for "${e}"`:"Trending Now"}),(0,t.jsx)(f,{initialQuery:e})]})]})}function m(){return(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)("div",{className:"flex justify-center p-10",children:(0,t.jsx)(d.default,{})}),children:(0,t.jsx)(x,{})})}e.s(["default",()=>m],52683)}]);